# プロジェクト固有のガイドライン

このプロジェクトは、ゲーム『ブルーアーカイブ』のコンテンツに関するツールを開発し、そのツールを Gemini CLI が使用することで、『ブルーアーカイブ』のコンテンツについて Gemini CLI と有益な対話を行うことを目的としています。

このプロジェクトにおける Gemini CLI の作業は、以下に従うものとします。

1.  ツールを利用したコミュニケーション
2.  ツール開発
3.  『ブルーアーカイブ』のコンテンツに関する知識

## 1. ツールを利用したコミュニケーション

*   ツールはMCP（Model-Context-Protocol）サーバーとして構成されています。
*   当該MCPサーバーは、kivotos という名称でプロジェクト固有の `setting.json` により登録されています。
    *   仮に当該MCPサーバーが見つからない場合、ユーザーに `node setup.js` コマンドの実行を促してください。
*   Gemini CLI はツールの出力を解釈し、要約してユーザーに提示します。

## 2. ツール開発

### a. ツール定義

*   ツールは `dotnet run` コマンドで起動されるMCPサーバーとして構成されています。

### b. 技術スタック

*   **プログラミング言語:** C#
*   **フレームワーク:** .NET 9
*   **ソリューションファイル:** `Ba.slnx`
*   **プロジェクト構造:**
    *   本体プロジェクト: `src/` ディレクトリ配下
    *   テストプロジェクト: `tests/` ディレクトリ配下

### c. 開発プロセス

*   **テスト駆動開発 (TDD):** 新しい機能やロジックを追加する際は、まずテストを記述し、そのテストがパスするように実装を進めます。
*   **MCPサーバーの実際の挙動確認**: MCPサーバーの実際の挙動確認は、`MCP Inspector` を用いて行います。その際、以下のコマンドをシェル実行してください。
    *   `pnpm dlx @modelcontextprotocol/inspector dotnet run --project src/Ba.Kuto.RankCalc/Ba.Kuto.RankCalc.csproj`

## 3. 『ブルーアーカイブ』のコンテンツに関する知識

### a. 戦術対抗戦

*   単に「対抗戦」とも呼びます。
*   現在の順位からチケットを1枚消費し、上位の順位のプレイヤーを指定して対戦し勝利することで、その順位を奪取します。
*   順位を奪取して1位まで順位を上げる行為またはプロセスを「登頂」と呼びます。
*   チケットは1日に5枚配布されます。
    *   有償で「石割り」を行い、5枚単位で追加入手することができます。
    *   有償で追加した場合、回数に応じて「n割り」と表現することがあります。（2回追加入手した場合、「2割り」）
    *   追加購入しない場合、「無割」と表現します。